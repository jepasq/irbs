#                                          -*-ruby-*-

# The main script location
script='src/irbs'

# Check if this script is correctly called from root sir
unless Dir.pwd.end_with? "irbs"
  raise "Specs must be called from root directory. Please use `make check'"
end

# Just a fake, dummy class
class MainScript 
end  

describe MainScript do
  it "exists" do
    expect(File.exists?(script)).to be true
  end
  
  it "is executable" do
    expect(File.executable?(script)).to be true
  end

  it "More than 1 arg produces error status code" do
    # The '2>&1' trick is here to redirect stderr to stdout and finally
    # have a quit output in tests
    output = `#{script} arg1 arg2 2>&1`
    expect($?.success?).to be false
  end
  
end
